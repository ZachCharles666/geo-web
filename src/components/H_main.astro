---
// H_main.astro — CTA + Footer (English Version)
const year = new Date().getFullYear();
const ACTION_URL =
  (import.meta.env.PUBLIC_LEAD_API_EN?.replace(/\/$/, '') || 'https://geo-max.tech') +
  '/lead-collect?json=1';
---

<!-- Call To Action -->
<section class="relative">
  <div class="w-full max-w-[100rem] mx-auto px-4 sm:px-6 lg:px-8">
    <div class="relative overflow-hidden rounded-2xl border bg-gradient-to-br from-indigo-600 to-indigo-600 dark:from-indigo-500 dark:to-indigo-500">
      <div class="px-6 py-10 sm:px-10 sm:py-14 lg:px-14 lg:py-16">
        <div class="grid gap-8 lg:grid-cols-12 lg:items-center">
          <div class="lg:col-span-8">
            <h2 class="text-white text-2xl sm:text-3xl lg:text-4xl font-bold">
              Make Your Content <strong class="font-extrabold">Visible in AI Search</strong>
            </h2>

            <p class="mt-3 text-indigo-100 max-w-2xl">
              Run the full GEO workflow in one place — analysis, evidence enhancement, multi-model alignment,
              and visibility scoring, all designed for AI-ready content.
            </p>

            <div class="mt-6 flex flex-col sm:flex-row gap-3">
              <a href="/score"
                class="inline-flex items-center justify-center px-5 py-3 rounded-lg bg-white text-indigo-700 font-semibold hover:bg-indigo-50">
                Evaluate Your Content
              </a>
              <a href="/contact"
                class="inline-flex items-center justify-center px-5 py-3 rounded-lg bg-indigo-700/20 text-white border border-white/30 hover:bg-white/10">
                Talk to Our Team
              </a>
            </div>
          </div>
          <div class="lg:col-span-4">
            <div class="rounded-xl bg-white/10 backdrop-blur border border-white/20 p-6">
              <dl class="grid grid-cols-3 gap-4 text-center text-white">
                <div>
                  <dt class="text-3xl font-extrabold">4.9</dt>
                  <dd class="text-xs text-indigo-100 mt-1">Visibility Score</dd>
                </div>
                <div>
                  <dt class="text-3xl font-extrabold">30+</dt>
                  <dd class="text-xs text-indigo-100 mt-1">Models / Platforms</dd>
                </div>
                <div>
                  <dt class="text-3xl font-extrabold">2–7 days</dt>
                  <dd class="text-xs text-indigo-100 mt-1">First Results</dd>
                </div>
              </dl>
              <p class="mt-4 text-[11px] leading-5 text-indigo-100">
                * Metrics are typical project references. Actual performance varies by industry, content quality, and platform strategy.
              </p>
            </div>
          </div>
        </div>
      </div>

      <!-- Decoration SVG -->
      <div class="pointer-events-none absolute -right-10 -bottom-10 opacity-30">
        <svg class="w-64 h-64 text-white" viewBox="0 0 121 135" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <path d="M5 16.4754C11.7688 27.4499 21.2452 57.3224 5 89.0164" stroke="currentColor" stroke-width="10" stroke-linecap="round"/>
          <path d="M33.6761 112.104C44.6984 98.1239 74.2618 57.6776 83.4821 5" stroke="currentColor" stroke-width="10" stroke-linecap="round"/>
          <path d="M50.5525 130C68.2064 127.495 110.731 117.541 116 78.0874" stroke="currentColor" stroke-width="10" stroke-linecap="round"/>
        </svg>
      </div>
    </div>
  </div>
</section>

<!-- Footer -->
<footer class="bg-gray-950 dark:bg-gray-900 mt-10" role="contentinfo">
  <div class="w-full max-w-[100rem] py-10 px-4 sm:px-6 lg:px-8 lg:pt-16 mx-auto">
    <!-- Grid -->
    <div class="grid grid-cols-2 md:grid-cols-4 xl:grid-cols-6 gap-8">
      <div class="col-span-full lg:col-span-2">
        <a class="flex-none text-xl font-semibold text-white" href="/" aria-label="GEO-Max">GEO-Max</a>
        <p class="mt-3 text-sm text-gray-400">
          GEO · Make your key information correctly understood and cited by AI.
        </p>
        <div class="mt-4 flex items-center gap-2">
          <a href="/contact" class="inline-flex items-center gap-2 text-sm text-gray-300 hover:text-white underline underline-offset-4">
            Contact
          </a>
          <!-- <span class="text-gray-700">·</span>
          <a href="#status" class="inline-flex items-center gap-2 text-sm text-gray-300 hover:text-white underline underline-offset-4">
            System Status
          </a> -->
        </div>
      </div>

      <div>
        <h4 class="font-semibold text-gray-100">Product</h4>
        <ul class="mt-3 space-y-3">
          <li><a class="text-gray-400 hover:text-gray-200" href="/pricing">Pricing</a></li>
          <!-- <li><a class="text-gray-400 hover:text-gray-200" href="#docs">Docs</a></li> -->
          <!-- <li><a class="text-gray-400 hover:text-gray-200" href="#changelog">Changelog</a></li> -->
          <!-- <li><a class="text-gray-400 hover:text-gray-200" href="#Downloadtemplates">Downloads & Templates</a></li> -->
        </ul>
      </div>

      <!-- <div>
        <h4 class="font-semibold text-gray-100">Solutions</h4>
        <ul class="mt-3 space-y-3">
          <li><a class="text-gray-400 hover:text-gray-200" href="/rewrite">Brand</a></li>
          <li><a class="text-gray-400 hover:text-gray-200" href="/rewrite">E-commerce</a></li>
          <li><a class="text-gray-400 hover:text-gray-200" href="/rewrite">Media Source</a></li>
          <li><a class="text-gray-400 hover:text-gray-200" href="/rewrite">B2B</a></li>
        </ul>
      </div> -->

      <div>
        <h4 class="font-semibold text-gray-100">Company</h4>
        <ul class="mt-3 space-y-3">
          <li><a class="text-gray-400 hover:text-gray-200" href="/about">About Us</a></li>
          <!-- <li><a class="text-gray-400 hover:text-gray-200" href="#blog">Blog</a></li> -->
          <!-- <li><a class="text-gray-400 hover:text-gray-200" href="#">Careers</a></li>
          <li><a class="text-gray-400 hover:text-gray-200" href="#">Customers & Cases</a></li> -->
        </ul>
      </div>

      <div class="col-span-2">
        <h4 class="font-semibold text-gray-100">Subscribe</h4>
        <form class="mt-4" aria-label="Newsletter Subscription" id="newsletter-form" action={ACTION_URL} method="post">
          <input type="hidden" name="src" value="footer_subscribe_en" />
          <input type="hidden" name="name" value="Newsletter Subscriber" />
          <input type="hidden" name="topic" value="Newsletter" />
          <input type="hidden" name="message" value="Newsletter signup" />
          <div class="flex flex-col sm:flex-row items-center gap-2 sm:gap-3 bg-white rounded-md px-3 py-2 dark:bg-slate-800 w-full max-w-lg">
            <div class="flex-1">
              <label for="newsletter-email" class="sr-only">Email</label>
              <input id="newsletter-email" name="email" type="email" required
                    class="py-2 px-3 block w-full border border-gray-200 rounded-md text-sm shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-slate-900 dark:text-gray-100"
                    placeholder="you@company.com" />
            </div>
            <button type="submit"
                    class="shrink-0 inline-flex justify-center items-center bg-indigo-600 hover:bg-indigo-700 text-white font-medium rounded-md text-sm px-5 py-2 transition focus:outline-none focus:ring-2 focus:ring-indigo-600 focus:ring-offset-2 focus:ring-offset-gray-950">
              Subscribe
            </button>
          </div>
          <p class="mt-3 text-xs text-gray-500">
            No spam. 1–2 updates per month. By subscribing, you agree to our
            <a href="/en/privacy" class="underline hover:text-gray-300">Privacy Policy</a>.
          </p>
          <p id="newsletter-result" class="mt-2 text-xs text-gray-400"></p>
        </form>
      </div>
    </div>
    <!-- End Grid -->

    <div class="mt-8 sm:mt-12 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between">
      <p class="text-sm text-gray-500">© {year} Singularity Media. All rights reserved.</p>

      <!-- Social -->
      <!-- <div class="flex gap-2">
        <a class="inline-flex justify-center items-center w-10 h-10 text-gray-300 hover:bg-white/[.08] rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-600 focus:ring-offset-2 focus:ring-offset-gray-950 transition" href="https://github.com" aria-label="GitHub">
          <svg class="w-4 h-4" viewBox="0 0 16 16" fill="currentColor" aria-hidden="true"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54..."/></svg>
        </a>
        <a class="inline-flex justify-center items-center w-10 h-10 text-gray-300 hover:bg-white/[.08] rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-600 focus:ring-offset-2 focus:ring-offset-gray-950 transition" href="#" aria-label="X/Twitter">
          <svg class="w-4 h-4" viewBox="0 0 16 16" fill="currentColor" aria-hidden="true"><path d="M3.3 0h3.1l2.5 3.6L11.4 0H16L9.9 7.1 16 16h-3.3l-3.6-5.1L5.2 16H0l6-7.1L0 0h3.3Z"/></svg>
        </a>
        <a class="inline-flex justify-center items-center w-10 h-10 text-gray-300 hover:bg-white/[.08] rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-600 focus:ring-offset-2 focus:ring-offset-gray-950 transition" href="#" aria-label="LinkedIn">
          <svg class="w-4 h-4" viewBox="0 0 16 16" fill="currentColor" aria-hidden="true"><path d="M1.5 0A1.5 1.5 0 0 0 0 1.5v13A1.5 1.5 0 0 0 1.5 16h13..."/></svg>
        </a>
      </div> -->
    </div>
  </div>

  <!-- Organization JSON-LD -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "GEO-Max",
    "alternateName": "Singularity GEO",
    "url": "https://geo-max.tech",
    "logo": "https://geo-max.tech/logo.png",
    "description": "GEO-Max is a generative engine optimization platform combining content optimization, source building, and multi-model distribution to enhance brand visibility and credibility in AI search.",
    "sameAs": [
      "https://x.com/geo_max",
      "https://www.linkedin.com/company/geomax"
    ],
    "contactPoint": [
      {
        "@type": "ContactPoint",
        "contactType": "business",
        "email": "contact@geo-max.tech",
        "availableLanguage": ["en", "zh-CN"],
        "areaServed": "GLOBAL"
      }
    ]
  }
  </script>

  <!-- WebSite JSON-LD -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "url": "https://geo-max.tech",
    "name": "GEO-Max Official Website",
    "publisher": {
      "@type": "Organization",
      "name": "GEO-Max",
      "url": "https://geo-max.tech"
    }
  }
  </script>
</footer>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const form = document.getElementById("newsletter-form");
    if (!form || !(form instanceof HTMLFormElement)) return;

    const result = document.getElementById("newsletter-result");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      const body = new URLSearchParams();
      new FormData(form).forEach((value, key) => {
        body.append(key, typeof value === "string" ? value : "");
      });

      try {
        const resp = await fetch(form.action, {
          method: "POST",
          headers: { "Content-Type": "application/x-www-form-urlencoded;charset=UTF-8" },
          body,
        });

        if (!resp.ok) throw new Error("subscribe_failed");
        if (result) result.textContent = "Subscribed. Please check your inbox.";
        form.reset();
      } catch (err) {
        if (result) result.textContent = "Subscription failed. Please try again later.";
      }
    });
  });
</script>
