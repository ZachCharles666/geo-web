---
/* F_main.astro — 行业洞察 / 研究报告（标准版） */
const tabs = [
  { key: 'all', label: '全部' },
  { key: 'report', label: '研究报告' },
  { key: 'ranking', label: '榜单' },
  { key: 'trend', label: '趋势洞察' },
];

const items = [
  {
    type: 'report',
    schemaType: 'Article',
    title: '2025 GEO 行业调研报告（海外 & 国内对照版）',
    desc: '系统梳理 AI 搜索生态、平台矩阵与商业化路径，含方法论与案例库。',
    date: '2025-09-30',
    read: '18 min',
    url: '#',
    tags: ['GEO', '行业研究', '平台矩阵']
  },
  {
    type: 'ranking',
    schemaType: 'Article',
    title: 'AI 搜索可见度排行榜：30 个品牌跨平台对比（Q3）',
    desc: '从可复述性、引用率、覆盖广度 3 指标评出 TOP30，可复现评分明细。',
    date: '2025-08-21',
    read: '12 min',
    url: '#',
    tags: ['排行榜', '可见度', '方法公开']
  },
  {
    type: 'trend',
    schemaType: 'Article',
    title: '内容分发新范式：从 SEO 到 GEO 的迁移路线',
    desc: '一文厘清传统 SEO 与 GEO 的边界、衔接与协同策略。',
    date: '2025-07-12',
    read: '10 min',
    url: '#',
    tags: ['策略', '增长', '工作流']
  },
  {
    type: 'report',
    schemaType: 'Dataset',
    title: 'GEO-Score 公测数据集（v0.9）',
    desc: '覆盖 10+ 主流大模型、2000+ 语料条目，评分维度与基准说明文档。',
    date: '2025-06-28',
    read: 'Data',
    url: '#',
    tags: ['Dataset', '评分基准', '开源']
  },
  {
    type: 'trend',
    schemaType: 'Article',
    title: '平台分发逻辑追踪：2025 年 10 个月关键变化',
    desc: '微信公众号/抖音/小红书图文侧的结构化变化与运营建议。',
    date: '2025-10-20',
    read: '14 min',
    url: '#',
    tags: ['平台', '分发机制', '图文']
  },
];
---

<section class="max-w-[85rem] px-4 py-10 sm:px-6 lg:px-8 lg:py-14 mx-auto" aria-labelledby="insight-title">
  <!-- Title -->
  <div class="w-full sm:w-4/5 lg:w-1/2 mx-auto text-center mb-10">
    <h2 id="insight-title" class="text-3xl lg:text-4xl font-bold text-gray-800 dark:text-gray-200">
      行业洞察与研究报告
    </h2>
    <p class="mt-3 text-gray-600 dark:text-gray-300">
      方法、数据与案例三位一体，帮助品牌在 AI 搜索中获得更高可见度与更强复述性。
    </p>
  </div>
  <!-- End Title -->

  <!-- Tabs -->
  <div class="flex justify-center gap-2 sm:gap-3 mb-8" role="tablist" aria-label="Insights filters">
    {tabs.map(t => (
      <button
        class="hs-tab-active:bg-gray-900 hs-tab-active:text-white border rounded-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-white/10 dark:border-gray-700"
        data-hs-tab={`#insights-${t.key}`}
        role="tab"
        aria-controls={`insights-${t.key}`}
        aria-selected={t.key === 'all' ? 'true' : 'false'}
        class:list={[t.key === 'all' ? 'hs-tab-active:bg-gray-900 hs-tab-active:text-white' : '']}
      >
        {t.label}
      </button>
    ))}
  </div>
  <!-- End Tabs -->

  <!-- Panels -->
  <div>
    {tabs.map(t => {
      const filtered = t.key === 'all' ? items : items.filter(i => i.type === t.key);
      return (
        <div id={`insights-${t.key}`} role="tabpanel" class={t.key === 'all' ? '' : 'hidden'}>
          <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
            {filtered.map((i) => (
              <article class="group relative h-full bg-white border rounded-2xl p-6 dark:bg-slate-900 dark:border-gray-700">
                <div class="mb-4 flex items-center gap-2">
                  <span class="inline-flex items-center rounded-full border px-2.5 py-1 text-xs text-gray-600 dark:text-gray-300 dark:border-gray-700">
                    {i.type === 'report' ? '研究报告' : i.type === 'ranking' ? '榜单' : '趋势洞察'}
                  </span>
                  <time class="text-xs text-gray-500" datetime={i.date}>{i.date}</time>
                </div>

                <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100 group-hover:underline">
                  <a href={i.url}>{i.title}</a>
                </h3>
                <p class="mt-2 text-sm text-gray-600 dark:text-gray-300">
                  {i.desc}
                </p>

                <div class="mt-4 flex flex-wrap gap-2">
                  {i.tags.map(tag => (
                    <span class="text-xs px-2 py-1 rounded-md bg-gray-100 text-gray-700 dark:bg-white/10 dark:text-gray-200">{tag}</span>
                  ))}
                </div>

                <div class="mt-5 flex items-center justify-between">
                  <a href={i.url} class="text-sm font-medium text-indigo-600 hover:text-indigo-700 dark:text-indigo-400 dark:hover:text-indigo-300 inline-flex items-center gap-1">
                    阅读更多
                    <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M13 5l7 7-7 7M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                  </a>
                  <span class="text-xs text-gray-500">{i.read}</span>
                </div>

                <!-- Microdata root for each item -->
                <div itemscope itemtype={`https://schema.org/${i.schemaType}`} class="sr-only">
                  <meta itemprop="headline" content={i.title} />
                  <meta itemprop="datePublished" content={i.date} />
                  <a itemprop="url" href={i.url}></a>
                  <meta itemprop="description" content={i.desc} />
                </div>
              </article>
            ))}
          </div>
        </div>
      );
    })}
  </div>
  <!-- End Panels -->

  <!-- View all -->
  <div class="mt-10 text-center">
    <a href="#" class="inline-flex items-center gap-2 px-4 py-2 rounded-md border text-sm font-medium text-gray-700 hover:bg-gray-50 dark:text-gray-200 dark:border-gray-700 dark:hover:bg-white/10">
      查看全部文章与数据
      <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M13 5l7 7-7 7M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
    </a>
  </div>

  <!-- JSON-LD ItemList -->
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "ItemList",
      "itemListElement": [
        { "@type": "ListItem", "position": 1, "item": { "@type": "Article", "headline": "2025 GEO 行业调研报告（海外 & 国内对照版）", "url": "/insights/2025-geo-industry-report", "datePublished": "2025-09-30" } },
        { "@type": "ListItem", "position": 2, "item": { "@type": "Article", "headline": "AI 搜索可见度排行榜：30 个品牌跨平台对比（Q3）", "url": "/insights/visibility-top30-q3", "datePublished": "2025-08-21" } },
        { "@type": "ListItem", "position": 3, "item": { "@type": "Article", "headline": "内容分发新范式：从 SEO 到 GEO 的迁移路线", "url": "/insights/seo-to-geo-migration", "datePublished": "2025-07-12" } },
        { "@type": "ListItem", "position": 4, "item": { "@type": "Dataset", "name": "GEO-Score 公测数据集（v0.9）", "url": "/datasets/geo-score-v0-9", "datePublished": "2025-06-28" } },
        { "@type": "ListItem", "position": 5, "item": { "@type": "Article", "headline": "平台分发逻辑追踪：2025 年 10 个月关键变化", "url": "/insights/content-trend-2025", "datePublished": "2025-10-20" } }
      ]
    }
  </script>
</section>
